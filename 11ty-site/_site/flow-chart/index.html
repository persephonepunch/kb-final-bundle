<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>System Flow Chart | Webflow Integration KB</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/main.css">
</head>
<body>
  <header class="header">
  <div class="container">
    <div class="header-inner">
      <div class="header-left">
        <a href="/" class="logo">
          <div class="logo-icon">KB</div>
          <span class="logo-text">Integration Docs</span>
        </a>

        <nav class="nav-desktop">
          <a href="/" class="nav-link ">
            Overview
          </a>
          <a href="/architecture/" class="nav-link ">
            Architecture
          </a>
          <a href="/implementation/" class="nav-link ">
            Implementation
          </a>
          <a href="/eleventy-graphql/" class="nav-link ">
            11ty GraphQL
          </a>
          <a href="/webflow-sync/" class="nav-link ">
            Webflow Sync
          </a>
          <a href="/prd/" class="nav-link ">
            Claude PRD
          </a>
          <a href="/flow-chart/" class="nav-link active">
            Flow Charts
          </a>
          <a href="/diagrams/" class="nav-link ">
            Diagrams
          </a>
        </nav>
      </div>

      <div class="header-right">
        <div class="search-container">
          <input type="text" id="searchInput" class="search-input" placeholder="Search documentation...">
        </div>

        <button class="mobile-menu-toggle" id="mobileMenuToggle">
          <span class="hamburger"></span>
        </button>
      </div>
    </div>

    <nav class="nav-mobile" id="mobileNav">
      <a href="/" class="nav-link-mobile">
        Overview
      </a>
      <a href="/architecture/" class="nav-link-mobile">
        Architecture
      </a>
      <a href="/implementation/" class="nav-link-mobile">
        Implementation
      </a>
      <a href="/eleventy-graphql/" class="nav-link-mobile">
        11ty GraphQL
      </a>
      <a href="/webflow-sync/" class="nav-link-mobile">
        Webflow Sync
      </a>
      <a href="/prd/" class="nav-link-mobile">
        Claude PRD
      </a>
      <a href="/flow-chart/" class="nav-link-mobile">
        Flow Charts
      </a>
      <a href="/diagrams/" class="nav-link-mobile">
        Diagrams
      </a>
    </nav>
  </div>
</header>

  
  <main class="main-content">
    <div class="container">
      
<main class="docs">
  <div class="docs__container">
    <aside class="docs__sidebar">
      <nav class="docs__nav">
        <a href="/" class="docs__nav-link">Overview</a>
        <a href="/architecture/" class="docs__nav-link">Architecture</a>
        <a href="/implementation/" class="docs__nav-link">Implementation</a>
        <a href="/eleventy-graphql/" class="docs__nav-link">11ty GraphQL</a>
        <a href="/prd/" class="docs__nav-link">Claude PRD</a>
        <a href="/flow-chart/" class="docs__nav-link docs__nav-link--active">Flow Chart</a>
      </nav>
    </aside>

    <article class="docs__content">
      <header class="docs__header">
        <h1 class="docs__title">System Flow Charts</h1>
        <p class="docs__subtitle">Visual diagrams of the complete integration architecture</p>
        <div class="docs__actions">
          <a href="/ASCII_FLOW_CHART.md" download class="btn btn--primary">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            Download Charts
          </a>
        </div>
      </header>

      <div class="docs__section">
        <h2>Complete System Architecture</h2>
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__language">ascii</span>
            <button class="code-block__copy" data-copy-target="complete-architecture">Copy</button>
          </div>
          <pre class="code-block__content" id="complete-architecture"><code>┌─────────────────────────────────────────────────────────────────────────────┐
│                           COMPLETE SYSTEM ARCHITECTURE                       │
│                    11ty + Shopify UCP + Google AI Integration                │
└─────────────────────────────────────────────────────────────────────────────┘

┌──────────────────┐
│   User Browser   │
│                  │
│  ┌────────────┐  │
│  │ 11ty Site  │  │
│  │ (Static)   │  │
│  └────────────┘  │
│         │        │
└─────────┼────────┘
          │
          ├─────────────────┬──────────────────┬─────────────────┐
          │                 │                  │                 │
          ▼                 ▼                  ▼                 ▼
┌──────────────────┐ ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
│  Shopify UCP     │ │   OAuth 2.0  │ │  A2P Payment │ │  Google AI   │
│  Catalog API     │ │   Identity   │ │   Gateway    │ │  Data Stream │
│                  │ │   Provider   │ │              │ │              │
│ ┌──────────────┐ │ │              │ │              │ │              │
│ │  Products    │ │ │ ┌──────────┐ │ │ ┌──────────┐ │ │ ┌──────────┐ │
│ │  Variants    │ │ │ │ Login    │ │ │ │ Mandate  │ │ │ │ Analytics│ │
│ │  Inventory   │ │ │ │ Sessions │ │ │ │ Verify   │ │ │ │ ML Model │ │
│ └──────────────┘ │ │ │ Tokens   │ │ │ │ Process  │ │ │ │ Personalize│
│                  │ │ └──────────┘ │ │ └──────────┘ │ │ └──────────┘ │
└──────────────────┘ └──────────────┘ └──────────────┘ └──────────────┘
          │                 │                  │                 │
          └─────────────────┴──────────────────┴─────────────────┘
                                    │
                                    ▼
                          ┌──────────────────┐
                          │  Middleware      │
                          │  (Xano/n8n)      │
                          │                  │
                          │ ┌──────────────┐ │
                          │ │ Data Sync    │ │
                          │ │ Webhooks     │ │
                          │ │ Transform    │ │
                          │ └──────────────┘ │
                          └──────────────────┘
                                    │
                          ┌─────────┴─────────┐
                          ▼                   ▼
                  ┌──────────────┐    ┌──────────────┐
                  │   Database   │    │  WebSocket   │
                  │              │    │   Server     │
                  │ ┌──────────┐ │    │              │
                  │ │ Users    │ │    │ ┌──────────┐ │
                  │ │ Orders   │ │    │ │ Real-time│ │
                  │ │ Sessions │ │    │ │ Events   │ │
                  │ │ Consent  │ │    │ │ Streaming│ │
                  │ └──────────┘ │    │ └──────────┘ │
                  └──────────────┘    └──────────────┘</code></pre>
        </div>
      </div>

      <div class="docs__section">
        <h2>Build-Time Data Flow (11ty)</h2>
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__language">ascii</span>
            <button class="code-block__copy" data-copy-target="build-time-flow">Copy</button>
          </div>
          <pre class="code-block__content" id="build-time-flow"><code>┌─────────────────────────────────────────────────────────────────┐
│                    11TY BUILD-TIME DATA FLOW                     │
└─────────────────────────────────────────────────────────────────┘

START BUILD
    │
    ▼
┌─────────────────────────┐
│  .eleventy.js           │
│  (Configuration)        │
└─────────────────────────┘
    │
    ▼
┌─────────────────────────┐
│  src/_data/             │
│                         │
│  ┌───────────────────┐  │
│  │ ucpClient.js      │  │  ← JWT Authentication
│  │ (API Client)      │  │
│  └───────────────────┘  │
│           │             │
│           ▼             │
│  ┌───────────────────┐  │
│  │ products.js       │  │  ← Fetch Products
│  │ (Data File)       │  │
│  └───────────────────┘  │
└─────────────────────────┘
    │
    │ [Product Data Array]
    │
    ▼
┌─────────────────────────┐
│  src/index.njk          │  ← Product Listing
│  src/product.njk        │  ← Product Details
│  (Templates)            │
└─────────────────────────┘
    │
    │ [Rendered HTML]
    │
    ▼
┌─────────────────────────┐
│  _site/                 │
│                         │
│  ├── index.html         │
│  ├── products/          │
│  │   ├── product-1.html │
│  │   ├── product-2.html │
│  │   └── ...            │
│  ├── css/               │
│  └── js/                │
└─────────────────────────┘
    │
    ▼
DEPLOY TO CDN</code></pre>
        </div>
      </div>

      <div class="docs__section">
        <h2>Runtime User Flow</h2>
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__language">ascii</span>
            <button class="code-block__copy" data-copy-target="runtime-flow">Copy</button>
          </div>
          <pre class="code-block__content" id="runtime-flow"><code>┌─────────────────────────────────────────────────────────────────┐
│                      RUNTIME USER FLOW                           │
└─────────────────────────────────────────────────────────────────┘

USER VISITS SITE
    │
    ▼
┌─────────────────────────┐
│  Load Static HTML       │
│  (from CDN)             │
└─────────────────────────┘
    │
    ▼
┌─────────────────────────┐
│  Initialize JavaScript  │
│  - Session Manager      │
│  - Consent Manager      │
│  - WebSocket Client     │
└─────────────────────────┘
    │
    ├─── Not Logged In ───┐
    │                     │
    │                     ▼
    │            ┌─────────────────────────┐
    │            │  Show Login Button      │
    │            └─────────────────────────┘
    │                     │
    │                     │ [User Clicks Login]
    │                     │
    │                     ▼
    │            ┌─────────────────────────┐
    │            │  OAuth 2.0 Flow         │
    │            │  1. Redirect to IdP     │
    │            │  2. User Authenticates  │
    │            │  3. Callback with Code  │
    │            │  4. Exchange for Token  │
    │            └─────────────────────────┘
    │                     │
    │                     ▼
    │            ┌─────────────────────────┐
    │            │  Store Session Token    │
    │            │  (httpOnly Cookie)      │
    │            └─────────────────────────┘
    │                     │
    └─────────────────────┘
              │
              ▼
┌─────────────────────────┐
│  User Logged In         │
│  - Show User Profile    │
│  - Enable Cart          │
│  - Track Behavior       │
└─────────────────────────┘
              │
              ├─── Browse Products ───┐
              │                       │
              │                       ▼
              │              ┌─────────────────────────┐
              │              │  View Product Details   │
              │              │  - Images               │
              │              │  - Price                │
              │              │  - Add to Cart          │
              │              └─────────────────────────┘
              │                       │
              │                       │ [Add to Cart]
              │                       │
              │                       ▼
              │              ┌─────────────────────────┐
              │              │  Update Cart State      │
              │              │  (localStorage)         │
              │              └─────────────────────────┘
              │                       │
              │                       │ [Proceed to Checkout]
              │                       │
              │                       ▼
              │              ┌─────────────────────────┐
              │              │  Checkout Flow          │
              │              │  1. Review Cart         │
              │              │  2. Shipping Info       │
              │              │  3. Payment Method      │
              │              └─────────────────────────┘
              │                       │
              │                       ▼
              │              ┌─────────────────────────┐
              │              │  A2P Payment Mandate    │
              │              │  1. Generate Mandate    │
              │              │  2. Sign with Key       │
              │              │  3. Submit to Gateway   │
              │              └─────────────────────────┘
              │                       │
              │                       ▼
              │              ┌─────────────────────────┐
              │              │  Payment Processing     │
              │              │  - Verify Signature     │
              │              │  - Charge Payment       │
              │              │  - Create Order         │
              │              └─────────────────────────┘
              │                       │
              │                       ▼
              │              ┌─────────────────────────┐
              │              │  Order Confirmation     │
              │              │  - Thank You Page       │
              │              │  - Email Receipt        │
              │              └─────────────────────────┘
              │
              └─── Throughout Session ───┐
                                        │
                                        ▼
                              ┌─────────────────────────┐
                              │  Data Streaming         │
                              │  (If Consent Given)     │
                              │                         │
                              │  WebSocket → Google AI  │
                              │  - Page Views           │
                              │  - Product Views        │
                              │  - Cart Actions         │
                              │  - Purchases            │
                              └─────────────────────────┘
                                        │
                                        ▼
                              ┌─────────────────────────┐
                              │  AI Personalization     │
                              │  - Product Recommendations │
                              │  - Dynamic Pricing      │
                              │  - Content Adaptation   │
                              └─────────────────────────┘</code></pre>
        </div>
      </div>

      <div class="docs__section">
        <h2>OAuth 2.0 Authentication Flow</h2>
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__language">ascii</span>
            <button class="code-block__copy" data-copy-target="oauth-flow">Copy</button>
          </div>
          <pre class="code-block__content" id="oauth-flow"><code>┌─────────────────────────────────────────────────────────────────┐
│                  OAUTH 2.0 AUTHENTICATION FLOW                   │
│                    (Authorization Code + PKCE)                   │
└─────────────────────────────────────────────────────────────────┘

┌──────────┐                                      ┌──────────────┐
│  Client  │                                      │   Identity   │
│ (11ty)   │                                      │   Provider   │
└──────────┘                                      └──────────────┘
     │                                                    │
     │ 1. User clicks "Login"                            │
     │                                                    │
     │ 2. Generate code_verifier & code_challenge        │
     │    (PKCE)                                          │
     │                                                    │
     │ 3. Redirect to Authorization Endpoint             │
     │────────────────────────────────────────────────────>
     │    GET /authorize?                                 │
     │      response_type=code                            │
     │      client_id=xxx                                 │
     │      redirect_uri=xxx                              │
     │      scope=openid profile email                    │
     │      code_challenge=xxx                            │
     │      code_challenge_method=S256                    │
     │                                                    │
     │                                4. Show Login Form  │
     │                                                    │
     │                                5. User Authenticates
     │                                                    │
     │ 6. Redirect back with authorization code          │
     │<────────────────────────────────────────────────────
     │    GET /callback?code=AUTH_CODE                    │
     │                                                    │
     │ 7. Exchange code for tokens                        │
     │────────────────────────────────────────────────────>
     │    POST /token                                     │
     │      grant_type=authorization_code                 │
     │      code=AUTH_CODE                                │
     │      redirect_uri=xxx                              │
     │      client_id=xxx                                 │
     │      code_verifier=xxx                             │
     │                                                    │
     │                                8. Validate Request │
     │                                9. Verify PKCE      │
     │                                                    │
     │ 10. Receive tokens                                 │
     │<────────────────────────────────────────────────────
     │    {                                               │
     │      "access_token": "...",                        │
     │      "id_token": "...",                            │
     │      "refresh_token": "...",                       │
     │      "expires_in": 3600                            │
     │    }                                               │
     │                                                    │
     │ 11. Store tokens securely                          │
     │     (httpOnly cookie)                              │
     │                                                    │
     │ 12. Decode id_token for user info                  │
     │                                                    │
     │ 13. User is logged in                              │
     │                                                    │
     │                                                    │
     │ [Later: Token Expires]                             │
     │                                                    │
     │ 14. Use refresh_token to get new access_token      │
     │────────────────────────────────────────────────────>
     │    POST /token                                     │
     │      grant_type=refresh_token                      │
     │      refresh_token=xxx                             │
     │      client_id=xxx                                 │
     │                                                    │
     │ 15. Receive new tokens                             │
     │<────────────────────────────────────────────────────
     │                                                    │</code></pre>
        </div>
      </div>

      <div class="docs__section">
        <h2>A2P Payment Flow</h2>
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__language">ascii</span>
            <button class="code-block__copy" data-copy-target="a2p-flow">Copy</button>
          </div>
          <pre class="code-block__content" id="a2p-flow"><code>┌─────────────────────────────────────────────────────────────────┐
│                      A2P PAYMENT FLOW                            │
│              (Agent Payments Protocol - Cryptographic)           │
└─────────────────────────────────────────────────────────────────┘

┌──────────┐                                      ┌──────────────┐
│  Client  │                                      │   Payment    │
│ (11ty)   │                                      │   Gateway    │
└──────────┘                                      └──────────────┘
     │                                                    │
     │ 1. User completes checkout                        │
     │                                                    │
     │ 2. Generate payment mandate                       │
     │    {                                               │
     │      "mandate_id": "uuid",                         │
     │      "amount": 99.99,                              │
     │      "currency": "USD",                            │
     │      "merchant_id": "...",                         │
     │      "timestamp": "...",                           │
     │      "nonce": "random"                             │
     │    }                                               │
     │                                                    │
     │ 3. Sign mandate with private key                  │
     │    signature = sign(mandate, private_key)         │
     │                                                    │
     │ 4. Submit signed mandate                           │
     │────────────────────────────────────────────────────>
     │    POST /payments/mandate                          │
     │    {                                               │
     │      "mandate": {...},                             │
     │      "signature": "...",                           │
     │      "public_key": "..."                           │
     │    }                                               │
     │                                                    │
     │                                5. Verify Signature │
     │                                   verify(mandate,  │
     │                                          signature,│
     │                                          public_key)
     │                                                    │
     │                                6. Check Idempotency│
     │                                   (mandate_id)     │
     │                                                    │
     │                                7. Validate Amount  │
     │                                   & Merchant       │
     │                                                    │
     │                                8. Process Payment  │
     │                                   (Charge Card)    │
     │                                                    │
     │ 9. Payment confirmation                            │
     │<────────────────────────────────────────────────────
     │    {                                               │
     │      "status": "success",                          │
     │      "transaction_id": "...",                      │
     │      "mandate_id": "...",                          │
     │      "timestamp": "..."                            │
     │    }                                               │
     │                                                    │
     │ 10. Create order in database                       │
     │                                                    │
     │ 11. Show confirmation to user                      │
     │                                                    │
     │ 12. Send receipt email                             │
     │                                                    │</code></pre>
        </div>
      </div>

      <div class="docs__section">
        <h2>WebSocket Data Streaming</h2>
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__language">ascii</span>
            <button class="code-block__copy" data-copy-target="websocket-flow">Copy</button>
          </div>
          <pre class="code-block__content" id="websocket-flow"><code>┌─────────────────────────────────────────────────────────────────┐
│                  WEBSOCKET DATA STREAMING FLOW                   │
│                    (Real-time to Google AI)                      │
└─────────────────────────────────────────────────────────────────┘

┌──────────┐         ┌──────────────┐         ┌──────────────┐
│  Client  │         │  WebSocket   │         │  Google AI   │
│ (11ty)   │         │   Server     │         │  Data Stream │
└──────────┘         └──────────────┘         └──────────────┘
     │                      │                         │
     │ 1. User gives consent│                         │
     │                      │                         │
     │ 2. Establish WS connection                     │
     │──────────────────────>                         │
     │    ws://server/stream?                         │
     │      token=xxx                                 │
     │                      │                         │
     │                      │ 3. Validate token       │
     │                      │                         │
     │ 4. Connection established                      │
     │<──────────────────────                         │
     │                      │                         │
     │ 5. Send events       │                         │
     │──────────────────────>                         │
     │    {                 │                         │
     │      "event": "pageview",                      │
     │      "page": "/products/123",                  │
     │      "timestamp": "...",                       │
     │      "user_id": "..."│                         │
     │    }                 │                         │
     │                      │                         │
     │                      │ 6. Forward to Google AI │
     │                      │─────────────────────────>
     │                      │    POST /ingest         │
     │                      │    {                    │
     │                      │      "events": [...]    │
     │                      │    }                    │
     │                      │                         │
     │                      │ 7. AI processes data    │
     │                      │                         │
     │                      │ 8. Send recommendations │
     │                      │<─────────────────────────
     │                      │    {                    │
     │                      │      "recommendations": [...]
     │                      │    }                    │
     │                      │                         │
     │ 9. Receive recommendations                     │
     │<──────────────────────                         │
     │    {                 │                         │
     │      "type": "recommendation",                 │
     │      "products": [...],                        │
     │      "confidence": 0.95                        │
     │    }                 │                         │
     │                      │                         │
     │ 10. Update UI with personalized content        │
     │                      │                         │
     │                      │                         │
     │ [Continuous streaming throughout session]      │
     │                      │                         │</code></pre>
        </div>
      </div>

      <div class="docs__section">
        <h2>Headless Forms Architecture</h2>
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__language">ascii</span>
            <button class="code-block__copy" data-copy-target="headless-forms">Copy</button>
          </div>
          <pre class="code-block__content" id="headless-forms"><code>┌─────────────────────────────────────────────────────────────────┐
│                    HEADLESS FORMS ARCHITECTURE                   │
│              (Decoupled Form Submission & Processing)            │
└─────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│         Client Webflow/11ty/Shopify Liquid Theme                │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │  Checkout/Form  │  │  Xano API       │  │  GTM Tracking   │  │
│  │  UI Components  │  │  Library        │  │  Code           │  │
│  └────────┬────────┘  └────────┬────────┘  └────────┬────────┘  │
│           │                    │                    │           │
│           └────────────────────┼────────────────────┘           │
│                                │                                │
│                                ▼                                │
│               ┌────────────────────────────────┐                │
│               │    Form Validation & Events    │                │
│               │    - Client-side validation    │                │
│               │    - GTM checkout_start event  │                │
│               │    - GTM checkout_submit event │                │
│               └────────────────┬───────────────┘                │
└────────────────────────────────┼────────────────────────────────┘
                                 │
                                 │ POST /api/checkout (HTTPS/JSON)
                                 │
                                 ▼
┌─────────────────────────────────────────────────────────────────┐
│                    MIDDLEWARE LAYER (Xano)                      │
│                                                                 │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │                  POST Endpoints                           │  │
│  │  /checkout/create  │  /webhooks/shopify                   │  │
│  └───────────────────────────────────────────────────────────┘  │
│                                │                                │
│  ┌─────────────────┐  ┌────────┴────────┐  ┌─────────────────┐  │
│  │   Database      │  │ UCP Data        │  │  SD-JWT+kb      │  │
│  │   Storage       │  │ Transformer     │  │  Validator      │  │
│  └─────────────────┘  └────────┬────────┘  └─────────────────┘  │
│                                │                                │
└────────────────────────────────┼────────────────────────────────┘
                                 │
                                 │ Shopify UCP API
                                 │
                                 ▼
┌─────────────────────────────────────────────────────────────────┐
│                   COMMERCE LAYER (Shopify)                      │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │   UCP API       │  │ Order           │  │  Webhook        │  │
│  │   (Checkout)    │  │ Management      │  │  System         │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │  Customer CRM  │  Meta Objects  │  Inventory Management    ││
│  └─────────────────────────────────────────────────────────────┘│
└─────────────────────────────────────────────────────────────────┘
                                 │
                                 │ Async Webhooks (10-30s)
                                 │
                                 ▼
┌─────────────────────────────────────────────────────────────────┐
│                     ANALYTICS LAYER                             │
│                                                                 │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐  │
│  │  Google Tag     │  │  Google         │  │  Data Layer     │  │
│  │  Manager (GTM)  │  │  Analytics 4    │  │  Events         │  │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘  │
│                                                                 │
│  Events: checkout_start → checkout_submit → purchase            │
└─────────────────────────────────────────────────────────────────┘

FORM TYPES SUPPORTED:
━━━━━━━━━━━━━━━━━━━━━
├── Checkout Forms      → UCP API + Order Creation + GTM purchase
├── Contact Forms       → Email notification + CRM
├── Newsletter Signup   → Shopify Customer + Shopify Native Email Provider
├── Product Inquiry     → Shopify Customer Note + Meta Objects
├── Quote Request       → Custom workflow + Admin email
└── Custom Forms        → Configurable handlers</code></pre>
        </div>
      </div>

      <div class="docs__section">
        <h2>Export Code to Native Shopify</h2>
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__language">ascii</span>
            <button class="code-block__copy" data-copy-target="export-native-shopify">Copy</button>
          </div>
          <pre class="code-block__content" id="export-native-shopify"><code>┌─────────────────────────────────────────────────────────────────┐
│                 EXPORT CODE TO NATIVE SHOPIFY                    │
│                (Webflow/11ty → Shopify Theme)                    │
└─────────────────────────────────────────────────────────────────┘

SOURCE (Headless)                         TARGET (Shopify Theme)
━━━━━━━━━━━━━━━━━━                        ━━━━━━━━━━━━━━━━━━━━━━

┌──────────────────┐                      ┌──────────────────────┐
│  Webflow/11ty    │                      │   Shopify Theme      │
│  Component       │                      │   (Dawn/Custom)      │
│                  │                      │                      │
│  ┌────────────┐  │      EXPORT          │  ┌────────────────┐  │
│  │ Form UI    │  │  ─────────────>      │  │  .liquid       │  │
│  │ Xano API   │  │                      │  │  section file  │  │
│  │ GTM Code   │  │                      │  │  + GTM events  │  │
│  └────────────┘  │                      │  └────────────────┘  │
└──────────────────┘                      └──────────────────────┘

                    CONVERSION PROCESS
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  STEP 1: Extract Component + Integrations                       │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  • Identify form/checkout UI boundaries                 │   │
│  │  • Extract HTML structure                               │   │
│  │  • Preserve Xano API endpoint configurations            │   │
│  │  • Maintain GTM data layer event triggers               │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              ▼                                  │
│  STEP 2: Transform to Liquid                                    │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  • Convert dynamic values to Liquid variables           │   │
│  │  • Replace loops with {% for %} tags                    │   │
│  │  • Add schema settings for Xano endpoint URL            │   │
│  │  • Include GTM container ID as theme setting            │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              ▼                                  │
│  STEP 3: Create Section Schema                                  │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  {% schema %}                                           │   │
│  │  {                                                      │   │
│  │    "name": "UCP Checkout Form",                         │   │
│  │    "settings": [                                        │   │
│  │      { "id": "xano_endpoint", "type": "url" },          │   │
│  │      { "id": "gtm_container", "type": "text" }          │   │
│  │    ],                                                   │   │
│  │    "blocks": [...],                                     │   │
│  │    "presets": [...]                                     │   │
│  │  }                                                      │   │
│  │  {% endschema %}                                        │   │
│  └─────────────────────────────────────────────────────────┘   │
│                              │                                  │
│                              ▼                                  │
│  STEP 4: Package Assets                                         │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  /sections/                                             │   │
│  │    └── ucp-checkout-form.liquid                         │   │
│  │  /assets/                                               │   │
│  │    ├── xano-api-library.js   (API integration)          │   │
│  │    ├── gtm-events.js         (Analytics tracking)       │   │
│  │    └── checkout-form.css                                │   │
│  │  /snippets/                                             │   │
│  │    └── form-field.liquid     (Reusable fields)          │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

OUTPUT FILE STRUCTURE:
━━━━━━━━━━━━━━━━━━━━━━
shopify-export/
├── sections/
│   └── ucp-checkout-form.liquid
├── assets/
│   ├── xano-api-library.js
│   ├── gtm-events.js
│   └── checkout-form.css
├── snippets/
│   └── form-field.liquid
└── README.md (Xano + GTM setup instructions)

PRESERVED INTEGRATIONS:
━━━━━━━━━━━━━━━━━━━━━━━
├── Xano Middleware    → POST /checkout/create endpoint
├── GTM Events         → checkout_start, checkout_submit, purchase
├── UCP Data Format    → SD-JWT+kb validation compatible
└── Webhook Support    → /webhooks/shopify endpoint ready</code></pre>
        </div>
      </div>

      <div class="docs__section">
        <h2>Export Form Code as Shopify Block</h2>
        <div class="code-block">
          <div class="code-block__header">
            <span class="code-block__language">ascii</span>
            <button class="code-block__copy" data-copy-target="export-form-block">Copy</button>
          </div>
          <pre class="code-block__content" id="export-form-block"><code>┌─────────────────────────────────────────────────────────────────┐
│                EXPORT FORM CODE AS SHOPIFY BLOCK                 │
│         (Webflow/11ty/Shopify Form → Shopify Section Block)      │
└─────────────────────────────────────────────────────────────────┘

WEBFLOW/11TY/SHOPIFY FORM                 SHOPIFY BLOCK
━━━━━━━━━━━━━━━━━━━━━━━                   ━━━━━━━━━━━━━

┌──────────────────┐                      ┌──────────────────────┐
│  &lt;form&gt;          │                      │  {% schema %}        │
│    &lt;input&gt;       │      CONVERT         │    "blocks": [{      │
│    &lt;select&gt;      │  ─────────────>      │      "type": "form"  │
│    &lt;textarea&gt;    │                      │    }]                │
│    &lt;button&gt;      │                      │  {% endschema %}     │
│  &lt;/form&gt;         │                      │                      │
└──────────────────┘                      └──────────────────────┘

┌─────────────────────────────────────────────────────────────────┐
│                    BLOCK SCHEMA STRUCTURE                        │
└─────────────────────────────────────────────────────────────────┘

{% schema %}
{
  "name": "Form Section",
  "tag": "section",
  "class": "form-section",
  "settings": [
    {
      "type": "text",
      "id": "form_title",
      "label": "Form Title",
      "default": "Contact Us"
    },
    {
      "type": "select",
      "id": "form_type",
      "label": "Form Type",
      "options": [
        { "value": "contact", "label": "Contact Form" },
        { "value": "newsletter", "label": "Newsletter" },
        { "value": "quote", "label": "Quote Request" }
      ]
    },
    {
      "type": "url",
      "id": "form_endpoint",
      "label": "Form Submission Endpoint"
    }
  ],
  "blocks": [
    {
      "type": "text_field",
      "name": "Text Field",
      "settings": [
        { "type": "text", "id": "label", "label": "Field Label" },
        { "type": "text", "id": "name", "label": "Field Name" },
        { "type": "checkbox", "id": "required", "label": "Required" }
      ]
    },
    {
      "type": "email_field",
      "name": "Email Field",
      "settings": [...]
    },
    {
      "type": "textarea_field",
      "name": "Textarea",
      "settings": [...]
    },
    {
      "type": "select_field",
      "name": "Dropdown",
      "settings": [...]
    }
  ],
  "presets": [{
    "name": "Contact Form",
    "blocks": [
      { "type": "text_field" },
      { "type": "email_field" },
      { "type": "textarea_field" }
    ]
  }]
}
{% endschema %}

┌─────────────────────────────────────────────────────────────────┐
│                    LIQUID TEMPLATE STRUCTURE                     │
└─────────────────────────────────────────────────────────────────┘

&lt;div class="form-section"&gt;
  &lt;h2&gt;{{ section.settings.form_title }}&lt;/h2&gt;

  &lt;form action="{{ section.settings.form_endpoint }}"
        method="POST"
        class="headless-form"
        data-form-type="{{ section.settings.form_type }}"&gt;

    {% for block in section.blocks %}
      {% case block.type %}

        {% when 'text_field' %}
          &lt;div class="form-field" {{ block.shopify_attributes }}&gt;
            &lt;label for="field-{{ block.id }}"&gt;
              {{ block.settings.label }}
            &lt;/label&gt;
            &lt;input type="text"
                   id="field-{{ block.id }}"
                   name="{{ block.settings.name }}"
                   {% if block.settings.required %}required{% endif %}&gt;
          &lt;/div&gt;

        {% when 'email_field' %}
          &lt;div class="form-field" {{ block.shopify_attributes }}&gt;
            &lt;label for="field-{{ block.id }}"&gt;
              {{ block.settings.label }}
            &lt;/label&gt;
            &lt;input type="email"
                   id="field-{{ block.id }}"
                   name="{{ block.settings.name }}"
                   {% if block.settings.required %}required{% endif %}&gt;
          &lt;/div&gt;

        {% when 'textarea_field' %}
          &lt;div class="form-field" {{ block.shopify_attributes }}&gt;
            &lt;label for="field-{{ block.id }}"&gt;
              {{ block.settings.label }}
            &lt;/label&gt;
            &lt;textarea id="field-{{ block.id }}"
                      name="{{ block.settings.name }}"
                      rows="5"
                      {% if block.settings.required %}required{% endif %}&gt;
            &lt;/textarea&gt;
          &lt;/div&gt;

      {% endcase %}
    {% endfor %}

    &lt;button type="submit" class="btn btn--primary"&gt;
      Submit
    &lt;/button&gt;
  &lt;/form&gt;
&lt;/div&gt;

┌─────────────────────────────────────────────────────────────────┐
│                      INTEGRATION FLOW                            │
└─────────────────────────────────────────────────────────────────┘

     Shopify Theme Editor                 Middleware (Xano)
     ━━━━━━━━━━━━━━━━━━━━                ━━━━━━━━━━━━━━━━━━
            │                                    │
            │ 1. Merchant adds Form Section      │
            │    via Theme Customizer            │
            │                                    │
            │ 2. Configure form fields           │
            │    using blocks                    │
            │                                    │
            │ 3. Set form endpoint URL ──────────│
            │                                    │
            │         [Customer Submits Form]    │
            │                                    │
            │ 4. Form POSTs to endpoint ─────────>
            │                                    │
            │                     5. Process submission
            │                        • Validate data
            │                        • Store in DB
            │                        • Trigger actions
            │                                    │
            │ 6. Return success/error <───────────
            │                                    │
            │ 7. Display confirmation            │
            │    message to customer             │
            │                                    │</code></pre>
        </div>
      </div>

      <div class="docs__section">
        <h2>Download Complete Flow Charts</h2>
        <p>Download the complete ASCII flow chart document with all diagrams and detailed annotations.</p>
        <a href="/ASCII_FLOW_CHART.md" download class="btn btn--primary btn--large">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          Download All Charts (Markdown)
        </a>
      </div>
    </article>
  </div>
</main>

    </div>
  </main>
  
  <footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-left">
        <span class="footer-title">Webflow Integration Knowledge Base</span>
        <span class="footer-separator">·</span>
        <span>Built with 11ty</span>
      </div>
      <div class="footer-right">
        <span>Version 1.0</span>
        <span class="footer-separator">·</span>
        <span>2026</span>
      </div>
    </div>
  </div>
</footer>

  
  <script src="/js/main.js"></script>
</body>
</html>
